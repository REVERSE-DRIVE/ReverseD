using System.Collections;
using EnemyManage;
using UnityEngine;

// 칼 쓰는 애
public class Malware : PlayerAttack
{
    [SerializeField] private Material[] materials;
    
    public override IEnumerator AttackRoutine()
    {
        _attackAnimators[0].SetTrigger("Attack");
        Collider2D[] coll = Physics2D.OverlapCircleAll(
            new Vector2(_playerTransform.x + dir.x, _playerTransform.y + dir.y), 1, _whatIsEnemy);
        foreach (Collider2D c in coll)
        {
            c.GetComponent<Enemy>().TakeDamage(PlayerManager.Instance.PlayerSO.attackDamage);
        }
        _attackSpriteRenderers[0].material = materials[1];
        
        yield return new WaitForSeconds(attackTime);
        _attackSpriteRenderers[0].material = materials[0];
        yield return new WaitForSeconds(PlayerManager.Instance.PlayerSO.attackSpeed);
        isAllowAttack = true;
    }
}